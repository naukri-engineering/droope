var DD=function(t,e,a){function i(){return arguments.length?function(t){}:function(){}}function r(t){function e(t){return function(){var e=$(this).attr("id"),a=t[e],i=a.id;if(i)for(var r in i){{i[r]}p.chkBox?p.removeAllTags():(p.inpElm.val(""),p.inpHid.data("optGroupKey","")),p.Allflg="",p.hideDD()}a.clrCalbackfun&&p.onClearTag[e](p.obj,0,$(this))}}var a,i=p.id;if(p.clearAllInside){var r="Clear All";for(var s in p.clearAllInside)r=p.clearAllInside[s];a=$("<div>").addClass("DDclearAll").attr({id:"clrAll_"+i}).html(r)}var d=$("#"+i).find(".srchTxt");if(!p.dpLyr||!p.dpLyr.length){var c=d.attr("name");d.data({name:c});{var h;$("#"+i).find(".arw").addClass("DDarwDwn")}p.chkBox?h=$("#"+i).find(".DDsearch li"):(h=$("#"+i).find(".DDsearch"),$("#"+i).addClass("singleSelect")),d.data({id:"inp_"+i,placeholder:d.attr("placeholder")}).attr({name:"",autocomplete:"off"}),p.isSearch||d.attr("readonly","readonly"),p.outerCont.find(".frst").css({"float":"none"}),$("#hid_"+i).length||(p.inpHid=$("<input>").attr({type:"hidden",id:"hid_"+i,name:c}),h.append(p.inpHid));var f=$("<div>"),u=$("<div>"),g=$("<ul>"),v=$("#"+i),C=p.chkBox?"ChkboxEnb":"";p.dpLyr=f,u.addClass("nScroll").attr("id","ul_"+i),f.addClass("drop").attr("id","dp_"+i),g.addClass(C),u.append(g),a?f.append(a):"",f.append(u),v.append(f),$("#"+i).on("click",".DDinputWrap, .DDsearch, .arw",function(t){t.stopPropagation(),d[0].focus()}).on("mouseenter",function(){p.layerOpenStatus=p.srchBx!==!1?!0:!1}).on("mouseleave",function(){p.layerOpenStatus=!1})}if(d.on("focus",n).on("keydown",function(t){o(t,$(this))}).on("keyup",p.Fn.keyUpEv).on("blur",l),p.layerOpenStatus=p.srchBx!==!1?!0:!1,p.fillData(),p.clrId)for(var s in p.clrId)$("#"+s).on("click",e(p.clrId))}function l(t){var e=p.id;if(!p.TagSpCnt&&p.chkBox?$("#"+e).find(".tagit:last").removeClass("TagSelected"):"",p.layerOpenStatus||p.hideDD(),!p.chkBox){var a=p.inpHid,i=p.inpElm,r=p.uEscp(a.attr("opt")),l=a.attr("value"),n=p.Ary.A,o=r?n[r][l]:n?n[l]:"";i.val()?o&&i.val(o).css({color:"#444"}):(a.val(""),"none"==p.dpLyr.css("display")&&p.onChange(""),p.onDeselect&&p.onDeselect())}}function n(t){p.layerOpenStatus=p.srchBx!==!1?!0:!1,p.inpt=$(this);{var e=$(this).data("id");e.split("_")[1]}p.DDSearch=$(this).parent(".DDSearch"),s(),$("#"+e).css({color:"#444"})}function o(t,e){var a,i=p.id,r=t.keyCode||t.which,l=$("#"+i).width()-15,n=e.val().replace(/\b/g,""),o=p.dpLyr.css("display");if((13==r||38==r)&&t.preventDefault(),13==r&&"none"==o&&!p.chkBox&&p.obj.form&&p.obj.form[0].submit(),9==r||27==r?p.hideDD():"",(r>=97&&122>=r||r>=65&&90>=r||r>=48&&57>=r)&&!p.TagSpCnt&&p.chkBox&&p.tags!==!1&&(a=d(l),p.inpElm.css({width:a+"px"})),!n&&p.chkBox){var c=$("#"+i).find(".tagit:last"),h=c.data("id");p.TagCnt>0&&8==t.keyCode&&!p.TagSpCnt&&h&&h.length>0?p.Tagfocus?(p.removeTag(h,c.children(".tagTxt").html(),!0),p.Tagfocus=0):($("#"+i).find(".DDsearch").find('[data-id="'+h+'"]').addClass("TagSelected"),p.Tagfocus=1):h&&($("#"+i).find(".DDsearch").find('[data-id="'+h+'"]').removeClass("TagSelected"),p.Tagfocus=0)}var f=$("#ul_"+i),u=f.find("ul"),g=u.find("li:first-child");if(p.curActElm.length||(p.curActElm=g),40==r)if("none"==o)p.hideDD(),s();else{var v,C=p.curActElm.next();C.length&&!C.hasClass("noData")&&(v=C.hasClass("optgroup")?C.next():C,p.curActElm.removeClass("active"),v.addClass("active"),p.curActElm=v,ieObj.scrollHandler(p.dpLyr,u.parent(),g,p.curActElm))}else if(38==r){var D,m=p.curActElm.prev();m.length&&(D=m.hasClass("optgroup")?m.prev():m,D.length&&(p.curActElm.removeClass("active"),D.addClass("active"),p.curActElm=D,ieObj.scrollHandler(p.dpLyr,u.parent(),g,p.curActElm)))}}function s(){var t=p.id;$("#"+t).find(".DDwrap").addClass("brBotN"),$("#"+t).find(".drop").show(),$("#ul_"+t)[0].scrollTop=0;var e=$("#"+t).outerWidth()+"px";p.dpLyr.css({width:e}),p.max_height(),p.chkBox||p.firstHighlight()}function d(t){return t>f?f+=5:void(f+=1)}function c(t,e){if(""!==p.inpElm.val()&&f>h){if(e>f)return f-=5;f-=1}}var p=this,h=30;p.obj=t;var f=p.obj.postPlaceholder?p.obj.postPlaceholder.width:30;p.parentRefData={},p.liCntrFx=[],p.preventClickFor=t.preventClickFor||[],p.onDeselect=t.onDeselect,p.liCntr=[],p.isReset=!0,p.sortPrefix=t.sortPrefix,p.hidValue=[],p.maxTagsCount=t.maxTagsCount||999,p.pKey=a,p.tagwithOptGroup=t.tagwithOptGroup||!1,p.srchBx=t.searchBox===!1?!1:!0,p.clrId=t.clearTagId,p.tagsSorting=t.tagsSorting===!1?!1:!0,p.MrgPrfAryOrdr=t.appendTags||!1,p.onClearTag=[],p.sugHgt=t.maxHeight||300,p.clearAllInside=t.clearAllInside||!1,p.parentChkBox=t.parentChkBox||!1,p.chkBox=t.checkBox||!1,p.allChk=t.allChk||!1,p.layerOpenStatus=!1,p.tags=t.tags===!1?t.tags:!0,p.TagSpCnt=t.tagInSepContainer||!1,p.inputValReset=t.inputValReset===!1?!1:!0,p.id=t.id,p.preTxt=t.preText===!1?"":t.preText||"You have selected",p.Allflg="",p.postTxt=t.postText===!1?"":t.postText||"item(s)",p.curActElm="",p.Tagfocus=0,p.onClickLi=t.onClickReq||i(),p.onTagClk=t.onTagClick||i(),p.onTagCrt=t.onTagCreate||i(),p.outerCont=$("#"+p.id),p.inpElm=p.outerCont.find(".srchTxt"),p.TagCnt=0,p.tagTitle=t.tagTitle||!1,p.optgrpNameRef=[],p.optgrpObject={},p.onChange=t.onChange||i(),p.dataObj=t.data||(t.id&&t.id[p.id]?t.id[p.id][0]:""),p.pKey?(p.chkBox||(DD.Ary[p.id]={}),DD.Ary[p.id]||(DD.Ary[p.id]={}),DD.Ary[p.id][p.pKey]=p.dataObj,p.Ary=DD.Ary[p.id]):(p.Ary={},p.Ary.A=p.dataObj),p.prefillData=t.prefillData||(p.obj.id[p.id]?p.obj.id[p.id][1]:""),p.isSearch=0==t.isSearch?!1:!0,DD.lastRef.iseventBindOnDocument||($(document).on("click.dd",function(t){var e=$(t.target).parents(".ddwn");e.length||Boolean(e.attr("searchDisabled"))===!0||(e.find(".DDwrap").removeClass("brBotN"),e.find(".drop").hide())}),DD.lastRef.iseventBindOnDocument=!0);var u=function(t){return t.replace(/>/g,"&gt;").replace(/</g,"&lt;")},g=function(t){if(-1!=t.indexOf("<b>")){t=t.split("<b>");var e=t[1].split("</b>"),a=[t[0],e[0],e[1]],i=[];for(var r in a)i.push(u(a[r]));return i[0]+"<b>"+i[1]+"</b>"+i[2]}return u(t)};p.replaceTag=function(t){return-1!=t.toString().indexOf("<")?g(t):t},p.setLi=function(t){var e=this;if($("#ul_"+t).find("li").length<e.liCntr){var a=e.appendData(e.Ary,"","",!0);e.dpLyr.find("ul").html(a[0]),e.liCntr=e.liCntrFx}},p.obj.resetPrefillValues?p.ChkBoxContr={}:p.ChkBoxContr?"":p.ChkBoxContr={};for(var v in t.clearTagId)for(var C in t.clearTagId[v])p.onClearTag[v]=t.clearTagId[v][C];p.Fn={preserveEventafterClone:function(e,a){var i,r=p.id;i=p.TagSpCnt?$("#"+p.TagSpCnt).find('[data-id="'+e+'"]'):$("#"+r).find(".DDsearch").find('[data-id="'+e+'"]'),i.on("click",".dCross",function(i){i.stopPropagation(),p.removeTag(e,$(this).find(".tagTxt").text(),a),p.max_height(),a?p.onTagClk(t,p.TagCnt):"",p.setInputText(),"block"==p.dpLyr.css("display")?$("#"+r).find(".srchTxt")[0].focus():""})},keyUpEv:function(t){var e=$(this).data("id"),a=$("#"+e).width()-15,i=(e.split("_")[1],t.keyCode||t.which),r=$(this).val().replace(/\b/g,"");if(13==i&&p.curActElm&&p.curActElm.length&&!p.curActElm.hasClass("noData")&&p.curActElm.hasClass("active")){var l=p.curActElm.children("a");if(p.chkBox){var n=l.data("id")+"_"+p.Escp(p.curActElm.attr("bindto"));l.hasClass("chkd")?p.removeTag("tg_"+n,l.html(),!0):p.CreateTags(l,n,"",p.tags)}else p.SingleSelection(l.text(),l.data("id").split("_")),p.hideDD()}8==i&&p.chkBox&&!p.TagSpCnt&&p.tags!==!1&&(r?wth=c(e,a)+"px":""!=p.inpHid.val()?wth=f+"px":wth="",p.inpElm.css({width:wth})),9!=i&&13!=i&&18!=i&&32!=i&&37!=i&&38!=i&&39!=i&&40!=i&&16!=i&&(p.Fn.initSearch(r,e,i),"none"==p.dpLyr.css("display")&&p.dpLyr.show())},initSearch:function(t,e,a){var i="";srchCntr=0,e=e.split("_")[1];var r=p.Ary;if(t){t=t.replace(/&amp;/gi,"&").replace(/[\s]+/g," ").replace(/^\s/,"");for(var l in r)for(var n in r[l])if("object"==typeof r[l][n]){var o,s="";o=r[l][n];for(var d in o)s+=p.searchData(o[d],t,e,e+"_"+d+"_"+p.eUnderScore(n),p.Escp(l));s&&(i+='<li class="optgroup">'+p.eUnderScore(n)+"</li>"+s,srchCntr++)}else $("#"+e).find(".cross").show(),i+=p.searchData(r[l][n],t,e,e+"_"+p.eUnderScore(n),p.Escp(l)),srchCntr++}else $("#"+e).find(".cross").hide(),i=p.appendData(p.Ary,"","",a)[0],srchCntr=p.liCntrFx;if(!i){var c=p.obj.noDataTxt?p.obj.noDataTxt:"No data found in search";i='<li class="noData">'+c+"</li>",srchCntr++}p.dpLyr.find("ul").html(i),p.liCntr=srchCntr,p.max_height(),p.firstHighlight()}},p.fillDatainDropdwonLayer=function(t,e,a,i,r){p.inpElm;p.chkBox&&p.inpHid.attr({value:""}),p.srchBx===!1?($("#"+t).attr("searchDisabled",!0).find(".DDwrap").hide(),$("#"+t).find(".drop").css({position:"static"})):$("#"+t).find("div.drop").css({borderTop:0}),$("#ul_"+t).find("ul").html(e),e="",p.srchBx===!1?s():"",p.chkForParent(p.optgrpObject,p.DATA)},p.liMousehover=function(){p.id;p.dpLyr.on("mouseover","li.pickVal",function(){p.curActElm.length?"":p.firstHighlight(),p.curActElm.removeClass("active"),$(this).addClass("active"),p.curActElm=$(this)}).on("mouseout","a",function(){$(this).removeClass("active")})},p.max_height=function(){for(var t=p.id,e=$("#ul_"+t),a=0,i=$("#ul_"+t).find(" ul li:first");i.length&&p.sugHgt>=a;)a+=i.outerHeight(),i=i.next();e.css(p.sugHgt<a?{height:p.sugHgt+"px"}:{height:a+"px",width:"100%"}),e.length&&e[0].csb&&e[0].csb.reset()},p.PickValuesFromDD=function(){{var e;p.id}p.dpLyr.on("click",".pickVal a",function(a){if(p.chkBox){var i=0,r=$(this),l=r.data("id");if($(this).hasClass("chkd")&&(i=1),e=r.html(),l.split("_")[1]==p.eUnderScore(p.otherLabId))1==i?p.onClickLi(t,p.otherLabId,"unChecked"):p.onClickLi(t,p.otherLabId,"checked"),p.hideDD();else{if(1==i){var n=l;$(this).parent().attr("bindto")&&(n=l+"_"+p.Escp($(this).parent().attr("bindto"))),p.removeTag("tg_"+n,e,!0)}else{var o=$(this).parent().attr("bindto");o?l=l+"_"+p.Escp(o):"",p.CreateTags(r,l,"",p.tags)}if(p.srchBx!==!1?setTimeout(function(){p.inpElm[0].focus()},100):"",p.parentChkBox){var s=$(this).data("id").split("_"),d=s[s.length-1],c=0;if(!p.parentRefData[d]){var h=$(this).parent().prevAll("li.optgroup:first"),f=h.nextUntil(".optgroup").toArray();p.parentRefData[d]=f}for(var u in p.parentRefData[d])$(p.parentRefData[d][u]).find("a").hasClass("chkd")&&c++,c==p.parentRefData[d].length?$('li.optgroup[data-id="opt_'+d+'"]').find("a").addClass("chkd"):$('li.optgroup[data-id="opt_'+d+'"]').find("a").removeClass("chkd")}}}else p.SingleSelection($(this).text(),$(this).data("id").split("_"))})},p.SingleSelection=function(e,a){var i=a[0],r=a[2]?a[2]:"";p.inpElm?p.inpElm.val(e):"",$("#"+i).find(".cross").show();var l=p.dUnderScore(p.uEscp(a[1])).replace(p.sortPrefix,"");p.inpHid.attr({value:l}).data("optGroupKey",r),p.layerOpenStatus&&p.hideDD(),p.onClickLi(t,p.dUnderScore(p.uEscp(a[1]))),p.onChange(l),p.selectedId=l},p.CreateTags=function(e,a,i,r){var l=p.id,n=a.split("_")[1];if(r="-1"==$.inArray(n,p.preventClickFor)&&0!=r?!0:!1,p.hidValue.length<p.maxTagsCount){var o,s=p.uEscp(a).split("_"),d=a.split("_"),c=3==d.length?d[0]+"_"+d[1]:d[0]+"_"+d[1]+"_"+d[2];if("string"!=typeof e?(o=e.html(),e.addClass("chkd")):o=e,p.TagCnt++,p.obj.postPlaceholder&&p.obj.postPlaceholder.text?p.inpElm.attr("placeholder",p.obj.postPlaceholder.text):p.inpElm.attr("placeholder",""),r!==!1){o=o.replace(/(<([^>]+)>)/gi,"").replace(/&amp;/gi,"&"),p.tagwithOptGroup?o="<b>"+s[2].replace("xSlashX","/").replace(/SxP/gi," ")+"</b>("+o+")":"";var h,u=$("<li>").append('<span class="tagTxt">'+o+"</span>"),g="tg_"+a;p.tagTitle&&u.attr("title",o);var v=p.TagSpCnt;if(v||r===!1){var C=u.append($("<a>").addClass("dCross")).addClass("tagit").attr({"data-id":g}),D=$("#"+v)[0];if(p.MrgPrfAryOrdr){var m=D.children[i];m?m.parentNode.insertBefore(C[0],m):$("#"+v).append(C)}else r===!1?"":D.insertBefore(C[0],D.firstChild);p.inpElm.css({color:"#444"}),h=g+" a.dCross"}else p.MrgPrfAryOrdr?$("#"+l).find(".DDsearch li:last").before(u.append($("<span>").addClass("dCross")).addClass("tagit").attr({"data-id":g})):$("#"+l).find(".DDsearch").prepend(u.append($("<span>").addClass("dCross")).addClass("tagit").attr({"data-id":g})),p.inpElm.css({width:f+"px"}),h=g+" span.dCross";p.Fn.preserveEventafterClone(g,!0)}$("#ul_"+p.id).find('[data-id="'+c+'"]').addClass("chkd"),p.setValueInHiddenField(s[1],o),p.ChkBoxContr[s[1]]=a,p.onClickLi(t,p.dUnderScore(p.uEscp(s[1])),"Checked",$('li[data-id="tg'+a+'"]'),p.TagCnt),p.setInputText()}else p.onTagCrt("Maximum Tags Created");p.tags&&!p.TagSpCnt&&(p.inpElm.val(""),p.setLi(p.id),p.max_height())},p.setValueInHiddenField=function(t,e,a){var i=p.id;if(t&&e){"all"==e.toLowerCase()&&(p.Allflg="all"),t=p.dUnderScore(p.uEscp(t)).replace(p.sortPrefix,"");var r=p.inpHid.val();r?(p.hidValue.push(t),p.inpHid.val(JSON.stringify(p.hidValue))):(p.hidValue.push(t),p.inpHid.val(JSON.stringify(p.hidValue)),$("#clrAll_"+i).show(),p.TagSpCnt?$("#"+p.TagSpCnt).show():$("#"+i).find("li.frst").css({"float":"left"})),p.onTagCrt()}else a!==!1&&(p.inpElm.val(""),p.inpHid.val(""));p.onChange(p.hidValue),p.selectedId=p.hidValue},r(),p.PickValuesFromDD(),p.liMousehover(),p.clickParent(),p.clickMain()};DD.prototype.prefillDataFormation=function(t){var e=this,a=(e.id,{});if(e.chkBox){if(t)for(var i in t)a[t[i]]="1"}else a=t;return a},DD.prototype.removeAllTags=function(){var t=this,e=t.id;for(var a in t.ChkBoxContr){var i,r=t.ChkBoxContr[a],l=r.split("_");3==l.length?i=l[0]+"_"+l[1]:4==l.length&&(i=l[0]+"_"+l[1]+"_"+l[2]),$("#ul_"+e).find('[data-id="'+i+'"]').removeClass("chkd"),t.TagSpCnt?$("#"+t.TagSpCnt).find('[data-id="tg_'+r+'"]').remove():$("#"+e).find(".DDsearch").find('[data-id="tg_'+r+'"]').remove()}t.parentChkBox&&$("#ul_"+e).find('li a[data-id="'+e+'"]').removeClass("chkd"),t.allChk&&$("#ul_"+e).find('li[data-id="opt_all"]').find("a").removeClass("chkd"),t.resetInpWidth(e),t.ChkBoxContr={},t.inpHid.val(""),t.hidValue=[],t.TagCnt=0,t.setPlaceHolderAttribute()},DD.prototype.destroy=function(){var t=this,e=t.id;t.dpLyr.remove(),t.inpHid.remove(),$("#"+e).find(".DDsearch .tagit").remove(),t.inpElm.val("").attr({placeholder:t.inpElm.data("placeholder"),name:t.inpElm.data("name")}),t.inpElm.removeAttr("autocomplete style"),t.inpElm.off("focus keydown keyup blur")},DD.prototype.removeTag=function(t,e,a,i){var r=this,l=r.id,n=t.replace("tg_",""),o=n.split("_"),s=$.parseJSON($("#hid_"+l).val()),d=4==o.length?o[0]+"_"+o[1]+"_"+o[2]:o[0]+"_"+o[1];if(-1!=$.inArray(o[1],s)){if($("#ul_"+l).find('[data-id="'+r.Escp(d)+'"]').removeClass("chkd"),r.parentChkBox){var c=d.split("_");c=c[c.length-1];for(key in r.parentRefData[c])$(r.parentRefData[c][key]).find("a").hasClass("chkd")||($("#ul_"+l).find('li[data-id="opt_'+c+'"]').find("a").removeClass("chkd"),$("#ul_"+l).find('li[data-id="opt_all"]').find("a").removeClass("chkd"))}i?$("#"+i).remove():r.TagSpCnt?$("#"+r.TagSpCnt).find('[data-id="'+t+'"]').remove():$("#"+l).find(".DDsearch").find('[data-id="'+t+'"]').remove(),r.emptyHidField(n.split("_")[1],l,e),r.TagCnt--,r.TagCnt||r.setPlaceHolderAttribute();for(var p in r.ChkBoxContr)r.ChkBoxContr[p]==n&&delete r.ChkBoxContr[p];a?r.onClickLi(r.obj,r.dUnderScore(r.uEscp(o[1])),"Unchecked","",r.TagCnt):"",r.setInputText()}},DD.prototype.fillData=function(){var t=[],e=this,a=e.id,i=e.prefillDataFormation(e.prefillData);t[a]=i;e.inpHid.val()&&e.removeAllTags(),e.NLi=e.appendData(e.Ary,t,i),e.fillDatainDropdwonLayer(a,e.NLi[0],0,e.NLi[3],e.NLi[4]),e.liCntrFx=e.liCntr=e.NLi[1],e.createTags_ifPrefillData(e.NLi[2])},DD.prototype.appendData=function(t,e,a,i){var r,l,n="",o=this,s=o.id,d=[],c="",p=0,h=0;o.allChk&&(n+=o.createParLi("all","All","0",!0));for(var f in t){l=f;for(var u in t[f]){var g=u.replace(o.sortPrefix,""),v=o.eUnderScore(o.Escp(g));if("object"==typeof t[f][u]){var C=o.parentChkBox;n+=o.createParLi(v,u,s,C);var D=[];p++;var m=[];o.optgrpObject[u]={},o.optgrpObject[u].checked=m,o.optgrpObject[u].unchecked=D;for(var k in t[f][u]){void 0!=a[k]?m.push(k):D.push(k),o.optgrpNameRef[k]={pName:u,text:t[f][u][k]};var x=o.Escp(k);if(e[s])if(e[s][k]){var y;if(parseInt(e[s][k])?y=k:"",y===k){o.inpVal=k,c=t[f][u][k];var _=f?s+"_"+x+"_"+v+"_"+f:s+"_"+x+"_"+v,T=[c,_,s,x];d[h++]=T,p++,n+=o.createLi(s+"_"+x+"_"+v,t[f][u][k],f),r=v}}else{a===k&&(o.inpVal=k,c=t[f][u][k],r=v),p++;var A=o.selCheckBox(s,v,f,x);n+=o.createLi(s+"_"+x+"_"+v,t[f][u][k],f,A)}else{a===k&&(o.inpVal=k,c=t[f][u][k]);var E=o.selCheckBox(s,v,f,x);n+=o.createLi(s+"_"+x+"_"+v,t[f][u][k],f,E),p++}}}else if(o.optgrpNameRef[u]={text:t[f][u]},o.chkBox){var b="";if(e&&!$.isEmptyObject(e[s])&&(e[s][g]?b=g:""),b==g){var S=[t[f][u],s+"_"+v+"_"+f,s,u];d[h++]=S,n+=o.createLi(s+"_"+v,t[f][u],f,""),p++}else{var L=o.selCheckBox(s,v,f);n+=o.createLi(s+"_"+v,t[f][u],f,L),p++}}else o.prefillData==g?(n+=o.createLi(s+"_"+v,t[f][u]),o.inpVal=u,c=t[f][u],p++,i?"":o.SingleSelection(t[f][u],[s,u])):(n+=o.createLi(s+"_"+v,t[f][u]),p++)}}if(!n){var B=o.obj.noDataTxt?o.obj.noDataTxt:"No data found in search";n='<li class="noData">'+B+"</li>"}if(o.chkBox&&o.tagsSorting===!1){var w=[],P=0;for(var V in a)for(var j in d)d[j][3]==V&&(w[P++]=d[j]);d=w}return $.extend(o.Ary[l],t[l]),[n,p,d,c,r]},DD.prototype.selectedValues=function(){return this.selectedId},DD.prototype.chkForParent=function(t,e){for(var a in t)0==t[a].unchecked.length?($('li[data-id="opt_'+this.eUnderScore(this.Escp(a))+'"]').find("a").addClass("chkd"),$('li[data-id="opt_all"]').find("a").addClass("chkd")):$('li[data-id="opt_all"]').find("a").removeClass("chkd")},DD.prototype.Escp=function(t){return t?t.replace(/\s/g,"SxP"):""},DD.prototype.uEscp=function(t){return t?t.replace(/SxP/g," "):!1},DD.prototype.eUnderScore=function(t){return t?t.replace(/\_/g,"undrxxscr"):""},DD.prototype.dUnderScore=function(t){return t?t.replace(/undrxxscr/gi,"_"):""},DD.prototype.clickParent=function(){var t=this,e=t.id;$("#ul_"+e).on("click","li.optgroup",function(){var t=this,e=$(this).nextUntil("li.optgroup"),a=e.length;if($(this).children("a").hasClass("chkd")){for(i=0;i<=a;i++)$(e).eq(i).find("a").hasClass("chkd")&&$(e).eq(i).find("a").click();$(t).children("a").removeClass("chkd")}else{for(i=0;i<=a;i++)$(e).eq(i).find("a").hasClass("chkd")||$(e).eq(i).find("a").click();$(t).children("a").addClass("chkd")}})},DD.prototype.clickMain=function(){var t=this,e=t.id;$("#ul_"+e).on("click",'li.optgroup[data-id="opt_all"]',function(t){t.stopImmediatePropagation();var e=this,a=$(this).siblings("li.optgroup"),i=a.length;if($(this).children("a").hasClass("chkd")){for(j=0;j<=i;j++)$(a).eq(j).find("a").hasClass("chkd")||$(a).eq(j).click();$(e).children("a").addClass("chkd")}else{for(j=0;j<=i;j++)$(a).eq(j).find("a").hasClass("chkd")&&$(a).eq(j).click();$(e).children("a").removeClass("chkd")}})},DD.prototype.searchData=function(t,e,a,i,r){var l="",n=this,t=t.toString();if(getPos=t.toLowerCase().indexOf(e.toLowerCase()),strLower=t.toLowerCase(),sTxtValueLower=e.toLowerCase(),spaceVal=strLower.indexOf(" "+sTxtValueLower)<0?!1:strLower.indexOf(" "+sTxtValueLower),bracketVal=strLower.indexOf("("+sTxtValueLower)<0?!1:strLower.indexOf("("+sTxtValueLower),slashVal=strLower.indexOf("/"+sTxtValueLower)<0?!1:strLower.indexOf("/"+sTxtValueLower),getPos>=0&&(spaceVal||bracketVal||slashVal)||0===getPos){getPos&&(spaceVal?getPos=spaceVal+1:bracketVal?getPos=bracketVal+1:slashVal&&(getPos=slashVal+1));var o=t.substr(0,getPos),s="<b>"+t.substr(getPos,e.length)+"</b>",d=t.substr(getPos+e.length,t.length),c=n.Escp(i).replace(n.sortPrefix,"");l=n.selChkBox(c+"_"+r,a)?n.createLi(c,o+s+d,r,"chkd"):n.createLi(c,o+s+d,r)}return l},DD.prototype.selChkBox=function(t,e){var a=0,i=this;for(var r in i.ChkBoxContr)t==i.ChkBoxContr[r]&&(a=1);return a?!0:!1},DD.prototype.selCheckBox=function(t,e,a,i){var r=0;for(var l in this.ChkBoxContr){r=1;break}return r?i?this.selChkBox(t+"_"+i+"_"+e+"_"+a,t)?"chkd":"":this.selChkBox(t+"_"+e+"_"+a,t)?"chkd":"":void 0},DD.prototype.createParLi=function(t,e,a,i){return i=i?'class="'+i+'"':"",i?'<li class="optgroup" data-id=opt_'+t+'><a href="javascript:;" data-id='+a+">"+e+"</li>":'<li class="optgroup" data-id=opt_'+t+">"+e+"</li>"},DD.prototype.createLi=function(t,e,a,i){return a=a?'bindTo="'+a+'"':"",i=i?'class="'+i+'"':"",'<li class="pickVal" '+a+'><a href="javascript:;" '+i+" data-id="+t+">"+this.replaceTag(e)+"</a></li>"},DD.prototype.resetInpWidth=function(t){$("#clrAll_"+t).hide(),this.inpElm.css({width:""}),$("#"+t).find("li.frst").css({"float":"none"})},DD.prototype.firstHighlight=function(){var t,e=this,a=e.id,i=$("#ul_"+a),r=i.find("ul");e.curActElm&&e.curActElm.removeClass("active"),e.curActElm=r.find("li:first-child");var l=e.Escp(e.inpHid.attr("value"));l&&!e.chkBox?(e.curActElm.removeClass("active"),t=e.inpHid.data("optGroupKey")?a+"_"+l+"_"+e.inpHid.data("optGroupKey"):a+"_"+l,e.curActElm=r.find('[data-id="'+t+'"]').parent().addClass("active")):e.curActElm.addClass("active")},DD.prototype.emptyHidField=function(t,e,a){var i=this;a&&"all"==a.toLowerCase()?i.Allflg="":"";var r,l=i.dUnderScore(i.uEscp(t)).replace(i.sortPrefix,""),n=$.inArray(l,i.hidValue);-1!==n&&(i.hidValue.splice(n,1),r=JSON.stringify(i.hidValue)),0==i.hidValue.length&&(i.resetInpWidth(e),r=i.hidValue),i.inpHid.val(r),i.onChange(i.hidValue)},DD.prototype.setInputText=function(){var t,e=this,a=e.id;t="all"==e.Allflg?"all":e.TagCnt,e.TagCnt?e.TagSpCnt||e.tags===!1?e.inpElm.val(e.preTxt+" "+t+" "+e.postTxt):"":!e.inpHid.val()&&e.inputValReset&&($("#"+a).find(".cross").hide(),e.inpElm.val(""),e.inpElm.css({width:""}))},DD.prototype.setPlaceHolderAttribute=function(){var t=this;t.inpElm.attr("placeholder",t.inpElm.data("placeholder")),t.inpElm.parents(".frst").css({"float-left":"none"})},DD.prototype.removeData=function(t){var e=this,a=(e.id,0);e.dpLyr.find("ul li").each(function(){if($(this).attr("bindTo")==t.key){var i=$(this).children("a");if(i.length){var r=i.data("id");i.hasClass("chkd")&&(delete e.ChkBoxContr[e.uEscp(r.split("_")[1])],e.removeTag("tg_"+r+"_"+e.Escp(t.key),i.html(),!0))}a++,$(this).remove()}}),delete e.Ary[t.key],e.liCntr=e.liCntr-a,$("#ul_"+e.id).find("li").length||$("#"+e.id).find(".tagit").remove()},DD.prototype.removeBlockofData=function(t){this.removeData(t)},DD.prototype.addSelected=function(t,e){var a=this.id;for(var i in t)this.CreateTags(t[i],a+"_"+i+"_A",0,e)},DD.prototype.deleteSelected=function(t){var e=this.id;for(var a in t.keyObject)this.removeTag("tg_"+e+"_"+t.keyObject[a]+"_A","",t.tag_onof_flag,t.remId)},DD.prototype.select=function(t){var e=this,a=e.id;if(e.chkBox)for(var i in t.key){var r=t.key[i],l=e.sortPrefix?e.sortPrefix+r:r,n=e.optgrpNameRef[l];n.pName?e.CreateTags(n.text,a+"_"+r+"_"+n.pName+"_A"):e.CreateTags(n.text,a+"_"+r+"_A")}else{if(!e.optgrpNameRef[t.key])throw"DD: Key not exist";e.SingleSelection(e.optgrpNameRef[t.key].text,[a,t.key])}},DD.prototype.deselect=function(t){var e=this,a=e.id;if(e.chkBox)for(var i in t.key){var r=t.key[i],l=e.sortPrefix?e.sortPrefix+r:r,n=e.optgrpNameRef[l];e.removeTag(n.pName?"tg_"+a+"_"+t.key[i]+"_"+n.pName+"_A":"tg_"+a+"_"+t.key[i]+"_A")}else{if(!e.optgrpNameRef[t.key])throw"DD: Key not exist";e.SingleSelection("",[a])}},DD.prototype.addData=function(t){var e=this,a={},i=[];t.status||(t.status="Checked");var r=t.key?t.key:"A";if("Checked"==t.status){a[r]=t.data;var l=e.prefillDataFormation(t.prefillData);i[e.id]=l,e.NLi=e.appendData(a,i,l),$("#ul_"+e.id).find("ul").append(e.NLi[0]),e.createTags_ifPrefillData(e.NLi[2]),e.liCntr+=e.NLi[1]}else"Unchecked"==t.status&&this.removeBlockofData(t)},DD.prototype.createTags_ifPrefillData=function(t){{var e=this;e.id}if(e.chkBox&&t)for(var a=0;a<t.length;a++){for(var i in e.prefillData)if(e.prefillData[i]==t[a][3])break;e.CreateTags(t[a][0],t[a][1],i,e.tags)}e.setInputText()},DD.prototype.replaceData=function(t){var e=this;id=e.id;var a=t.isReset===!1?t.isReset:e.isReset,i=[],r=e.inpHid,l=$.trim(r.val());e.prefillData=t.prefillData;if(e.chkBox&&l&&(e.TagSpCnt?$("#"+e.TagSpCnt).find(".tagit").remove():$("#"+id).find(".DDsearch").find(".tagit").remove(),e.resetInpWidth(id),e.ChkBoxContr={},r.val(""),e.hidValue=[],e.TagCnt=0,e.setPlaceHolderAttribute()),a&&(e.inpElm.val(""),r.val("")),$.isEmptyObject(t.data))throw"Either data object is empty or undefined";e.Ary={A:t.data},e.ChkBoxContr=[];var n=e.prefillDataFormation(t.prefillData);i[id]=n;var o=e.appendData(e.Ary,i,n);e.dpLyr.find("ul").html(o[0]),e.createTags_ifPrefillData(o[2]),e.liCntr=o[1]},DD.prototype.hideDD=function(){var t=this,e=t.id;"block"==t.dpLyr.css("display")&&(t.dpLyr.hide(),$("#"+e).find(".DDwrap").removeClass("brBotN"),t.chkBox||(t.curActElm?t.curActElm.removeClass("active"):"",!t.inpHid.val()&&t.inputValReset&&t.inpElm.val("")),t.setInputText()),t.srchBx!==!1&&t.setLi(e)},DD.Ary={},DD.lastRef={};var ieObj={scrollHandler:function(t,e,a,i){if(i.length){var r,l=e.height(),n=e.scrollTop(),o=l+n,s=i.position().top+e.scrollTop(),d=s+i.outerHeight();return d>=o?(r=d-l>0?d-l:0,e.scrollTop(r)):s<e.scrollTop()&&(r=s,e.scrollTop(r)),r}}};